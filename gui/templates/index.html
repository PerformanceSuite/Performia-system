<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performia</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">PERFORMIA</div>
        <button id="testToneBtn" class="btn btn-primary">Test Tone</button>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar (Collapsible) -->
        <aside class="sidebar left-sidebar" id="leftSidebar">
            <button class="sidebar-toggle" onclick="toggleSidebar('left')">
                <span class="toggle-icon">◀</span>
            </button>
            
            <div class="sidebar-content">
                <div class="panel">
                    <h3>Audio Settings</h3>
                    
                    <div class="control-group">
                        <label>Audio Driver</label>
                        <select id="audioDriver" class="select-control">
                            <option>Quantum 2626</option>
                            <option>Mac Studio Speakers</option>
                            <option>Built-in Audio</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label>Sample Rate</label>
                        <select id="sampleRate" class="select-control">
                            <option>44100 Hz</option>
                            <option>48000 Hz</option>
                            <option selected>96000 Hz</option>
                            <option>192000 Hz</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label>Buffer Size</label>
                        <select id="bufferSize" class="select-control">
                            <option>64 samples</option>
                            <option>128 samples</option>
                            <option>256 samples</option>
                            <option selected>512 samples</option>
                            <option>1024 samples</option>
                        </select>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Center Content -->
        <main class="main-content">
            <!-- I/O Levels -->
            <div class="io-meters">
                <div class="meter-group">
                    <label>Input</label>
                    <div class="meter-container">
                        <div class="meter-bar">
                            <div id="inputLevel" class="meter-fill input-meter"></div>
                        </div>
                        <span class="meter-value" id="inputValue">-∞ dB</span>
                    </div>
                </div>
                
                <div class="meter-group">
                    <label>Output</label>
                    <div class="meter-container">
                        <div class="meter-bar">
                            <div id="outputLevel" class="meter-fill output-meter"></div>
                        </div>
                        <span class="meter-value" id="outputValue">-∞ dB</span>
                    </div>
                </div>
            </div>

            <!-- Agent Tracks -->
            <div class="agent-tracks">
                <!-- Drums Track -->
                <div class="track" data-agent="drums">
                    <div class="track-header">
                        <h4>DRUMS</h4>
                        <div class="track-buttons">
                            <button class="btn-small btn-mute" data-agent="drums">M</button>
                            <button class="btn-small btn-solo" data-agent="drums">S</button>
                        </div>
                    </div>
                    <div class="track-controls">
                        <input type="range" class="track-slider" id="drumVolume" min="0" max="100" value="70">
                        <div class="track-meter">
                            <div class="track-level" id="drumLevel"></div>
                        </div>
                    </div>
                </div>

                <!-- Bass Track -->
                <div class="track" data-agent="bass">
                    <div class="track-header">
                        <h4>BASS</h4>
                        <div class="track-buttons">
                            <button class="btn-small btn-mute" data-agent="bass">M</button>
                            <button class="btn-small btn-solo" data-agent="bass">S</button>
                        </div>
                    </div>
                    <div class="track-controls">
                        <input type="range" class="track-slider" id="bassVolume" min="0" max="100" value="70">
                        <div class="track-meter">
                            <div class="track-level" id="bassLevel"></div>
                        </div>
                    </div>
                </div>

                <!-- Melody Track -->
                <div class="track" data-agent="melody">
                    <div class="track-header">
                        <h4>MELODY</h4>
                        <div class="track-buttons">
                            <button class="btn-small btn-mute" data-agent="melody">M</button>
                            <button class="btn-small btn-solo" data-agent="melody">S</button>
                        </div>
                    </div>
                    <div class="track-controls">
                        <input type="range" class="track-slider" id="melodyVolume" min="0" max="100" value="70">
                        <div class="track-meter">
                            <div class="track-level" id="melodyLevel"></div>
                        </div>
                    </div>
                </div>

                <!-- Harmony Track -->
                <div class="track" data-agent="harmony">
                    <div class="track-header">
                        <h4>HARMONY</h4>
                        <div class="track-buttons">
                            <button class="btn-small btn-mute" data-agent="harmony">M</button>
                            <button class="btn-small btn-solo" data-agent="harmony">S</button>
                        </div>
                    </div>
                    <div class="track-controls">
                        <input type="range" class="track-slider" id="harmonyVolume" min="0" max="100" value="70">
                        <div class="track-meter">
                            <div class="track-level" id="harmonyLevel"></div>
                        </div>
                    </div>
                </div>

                <!-- Listener Track -->
                <div class="track" data-agent="listener">
                    <div class="track-header">
                        <h4>LISTENER</h4>
                        <div class="track-buttons">
                            <button class="btn-small btn-mute" data-agent="listener">M</button>
                            <button class="btn-small btn-solo" data-agent="listener">S</button>
                        </div>
                    </div>
                    <div class="track-controls">
                        <input type="range" class="track-slider" id="listenerVolume" min="0" max="100" value="70">
                        <div class="track-meter">
                            <div class="track-level" id="listenerLevel"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Sidebar (Collapsible) -->
        <aside class="sidebar right-sidebar" id="rightSidebar">
            <button class="sidebar-toggle" onclick="toggleSidebar('right')">
                <span class="toggle-icon">▶</span>
            </button>
            
            <div class="sidebar-content">
                <div class="panel">
                    <h3>Agent Parameters</h3>
                    
                    <div class="control-group">
                        <label>Aggression</label>
                        <input type="range" class="param-slider" id="aggression" min="0" max="100" value="50">
                    </div>
                    
                    <div class="control-group">
                        <label>Creativity</label>
                        <input type="range" class="param-slider" id="creativity" min="0" max="100" value="50">
                    </div>
                    
                    <div class="control-group">
                        <label>Responsiveness</label>
                        <input type="range" class="param-slider" id="responsiveness" min="0" max="100" value="50">
                    </div>
                    
                    <div class="control-group">
                        <label>Stability</label>
                        <input type="range" class="param-slider" id="stability" min="0" max="100" value="50">
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Bottom Status Bar -->
    <footer class="status-bar">
        <div class="status-item">
            <span class="status-label">Latency:</span>
            <span class="status-value" id="latencyDisplay">-- ms</span>
        </div>
        <div class="status-item">
            <span class="status-label">CPU:</span>
            <span class="status-value" id="cpuDisplay">--%</span>
        </div>
        <div class="status-item">
            <span class="status-label">Memory:</span>
            <span class="status-value" id="memoryDisplay">-- MB</span>
        </div>
        <div class="status-item">
            <span class="status-indicator" id="statusIndicator">●</span>
            <span class="status-label" id="statusText">Disconnected</span>
        </div>
    </footer>

    <script src="/static/main.js"></script>
</body>
</html>